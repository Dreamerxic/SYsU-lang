FIND_PACKAGE(LLVM REQUIRED PATHS "/usr/lib/llvm-11/lib/cmake/llvm")
IF(${LLVM_VERSION_MAJOR} EQUAL 11)
    MESSAGE(STATUS "Found LLVM (found version \"${LLVM_PACKAGE_VERSION}\")")
ELSE()
    MESSAGE(WARNING "No LLVM-11 found, try to use LLVM-${LLVM_PACKAGE_VERSION}, and this may cause errors.")
ENDIF()
FIND_PACKAGE(BISON REQUIRED)
BISON_TARGET(parser parser.y parser.cc)
ADD_EXECUTABLE(sysu-parser ${BISON_parser_OUTPUTS})
TARGET_INCLUDE_DIRECTORIES(sysu-parser PRIVATE ${LLVM_INCLUDE_DIRS})
LLVM_MAP_COMPONENTS_TO_LIBNAMES(LLVM_LIBS support)
TARGET_LINK_LIBRARIES(sysu-parser ${LLVM_LIBS})
INSTALL(TARGETS sysu-parser)